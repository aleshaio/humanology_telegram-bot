# ðŸš€ Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Humanology Bot

## ðŸŽ¯ Ð¡Ñ‚Ð°Ñ‚ÑƒÑ

âœ… **Ð‘Ð¾Ñ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ Ð½Ð° VDS Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚!**

- **Ð¡ÐµÑ€Ð²ÐµÑ€:** 141.8.198.171
- **Ð¡Ñ‚Ð°Ñ‚ÑƒÑ:** ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ñ‹, Ð±Ð¾Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚
- **Telegram:** @humanologybot

## ðŸ—ï¸ ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ

```
VDS (141.8.198.171)
â”œâ”€â”€ /opt/humanology-bot/          # Ð Ð°Ð±Ð¾Ñ‡Ð°Ñ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ
â”œâ”€â”€ Docker + Docker Compose        # ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¸Ð·Ð°Ñ†Ð¸Ñ
â”œâ”€â”€ PostgreSQL 16                  # Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…
â””â”€â”€ UFW + fail2ban                 # Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ
```

## ðŸ”§ Ð¢Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ

- **ÐžÐ¡:** Ubuntu/Debian
- **RAM:** ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 1GB
- **Ð”Ð¸ÑÐº:** ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 10GB
- **ÐŸÐ¾Ñ€Ñ‚Ñ‹:** 22 (SSH), 80 (HTTP), 443 (HTTPS)

## ðŸ“‹ ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°

### 1. Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ðµ Ð¿Ð°ÐºÐµÑ‚Ñ‹
```bash
apt update && apt upgrade -y
apt install -y git curl ufw fail2ban docker.io docker-compose-plugin
```

### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸
```bash
# UFW
ufw allow 22
ufw allow 80
ufw allow 443
ufw enable

# fail2ban
systemctl enable fail2ban
systemctl start fail2ban
```

### 3. Docker
```bash
systemctl enable docker
systemctl start docker
```

## ðŸš€ Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ

### 1. ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ
```bash
ssh root@141.8.198.171
# ÐŸÐ°Ñ€Ð¾Ð»ÑŒ: Ð”ÑˆÐ¼ÑƒÐºÐ·Ñ‰Ñ‰Ð´Ð°Ñ1!
```

### 2. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
```bash
mkdir -p /opt/humanology-bot
cd /opt/humanology-bot
```

### 3. ÐšÐ»Ð¾Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
```bash
git clone https://github.com/aleshaio/humanology_telegram-bot.git .
```

### 4. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ .env Ñ„Ð°Ð¹Ð»Ð°
```bash
cat > .env << 'EOF'
BOT_TOKEN=7755199130:AAGQjQvQ3wSFu5-853jxa4kU8rvM30VE-E4
DB_DSN=postgresql+asyncpg://bot:botpass@postgres:5432/botdb
SITE_API_URL=placeholder_url
SITE_API_KEY=placeholder_key
OPENAI_API_KEY=placeholder_key
WEBHOOK_URL=
MODE=polling
EOF
```

### 5. Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
```bash
docker compose up -d --build
```

### 6. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°
```bash
docker ps
docker logs humanology_app
```

## ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ

### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ
```bash
cd /opt/humanology-bot
git pull origin main
docker compose down
docker compose up -d --build
```

### Ð ÑƒÑ‡Ð½Ð¾Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ
```bash
cd /opt/humanology-bot
git fetch origin
git reset --hard origin/main
docker compose down
docker compose up -d --build
```

## ðŸ“Š ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

### Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
```bash
docker ps -a
docker stats
```

### Ð›Ð¾Ð³Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
```bash
# ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 50 ÑÑ‚Ñ€Ð¾Ðº
docker logs humanology_app --tail 50

# Ð¡Ð»ÐµÐ´Ð¸Ñ‚ÑŒ Ð·Ð° Ð»Ð¾Ð³Ð°Ð¼Ð¸ Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
docker logs -f humanology_app

# Ð›Ð¾Ð³Ð¸ Ñ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸
docker logs humanology_app --since "2024-01-01T00:00:00"
```

### Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
```bash
docker exec -it humanology_pg psql -U bot -d botdb -c "\dt"
```

## ðŸš¨ Ð£ÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð½ÐµÐ¿Ð¾Ð»Ð°Ð´Ð¾Ðº

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: ÐšÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€ Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker logs humanology_app

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
docker compose restart app

# ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð·
docker compose up -d --build --force-recreate
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: Ð‘Ð¾Ñ‚ Ð½Ðµ Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚
```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ
docker ps

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
docker logs humanology_app --tail 100

# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
docker exec humanology_app env | grep BOT_TOKEN
```

### ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°: ÐžÑˆÐ¸Ð±ÐºÐ¸ Ð² ÐºÐ¾Ð´Ðµ
```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹
docker compose down

# Ð˜ÑÐ¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð´
nano app/main.py

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ð·Ð°Ð½Ð¾Ð²Ð¾
docker compose up -d --build
```

## ðŸ”’ Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ

### SSH ÐºÐ»ÑŽÑ‡Ð¸ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)
```bash
# ÐÐ° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½Ðµ
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
ssh-copy-id root@141.8.198.171

# ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»ÑŒÐ½ÑƒÑŽ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÑŽ
nano /etc/ssh/sshd_config
# PasswordAuthentication no
systemctl restart ssh
```

### Firewall
```bash
ufw status
ufw allow from your_ip to any port 22
```

### ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ
```bash
# ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚Ð¸
apt install unattended-upgrades
dpkg-reconfigure unattended-upgrades
```

## ðŸ“ˆ ÐœÐ°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ

### Ð£Ð²ÐµÐ»Ð¸Ñ‡ÐµÐ½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²
```bash
# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹
docker compose down

# Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ docker-compose.yml (Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ limits)
# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ñ Ð½Ð¾Ð²Ñ‹Ð¼Ð¸ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°Ð¼Ð¸
docker compose up -d
```

### Ð‘Ð°Ð»Ð°Ð½ÑÐ¸Ñ€Ð¾Ð²ÐºÐ° Ð½Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸
```bash
# Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ nginx ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ reverse proxy
# Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ health checks
```

## ðŸŽ¯ Ð¢ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ

### 1. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
```bash
docker ps
# Ð”Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ: humanology_app (Up), humanology_pg (Up)
```

### 2. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð²
```bash
docker logs humanology_app
# Ð”Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ: "Bot starting..."
```

### 3. Ð¢ÐµÑÑ‚ Ð² Telegram
- ÐÐ°Ð¹Ð´Ð¸Ñ‚Ðµ @humanologybot
- ÐžÑ‚Ð¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ `/start`
- ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ð²ÑÐµ 9 ÐºÐ½Ð¾Ð¿Ð¾Ðº Ð¼ÐµÐ½ÑŽ

### 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
```bash
docker exec -it humanology_pg psql -U bot -d botdb -c "SELECT version();"
```

## ðŸ“š ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

### Docker
```bash
# ÐžÑ‡Ð¸ÑÑ‚ÐºÐ° Ð½ÐµÐ¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ñ… Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²
docker system prune -a

# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð¸ÑÐºÐ°
docker system df

# ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð²ÑÐµÑ… ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²
docker stop $(docker ps -q)
```

### Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð°
```bash
# ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²
htop
df -h
free -h

# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð»Ð¾Ð³Ð¾Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹
journalctl -u docker
journalctl -u ssh
```

---

**ðŸŽ‰ Ð‘Ð¾Ñ‚ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ Ð¸ Ð³Ð¾Ñ‚Ð¾Ð² Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ!**
